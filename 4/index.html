
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
        <meta name="description" content="A collection of Python solutions for LeetCode problems with detailed explanations.">
      
      
      
        <link rel="canonical" href="https://lukeclarksf.github.io/leetcode/4/">
      
      
        <link rel="prev" href="../3/">
      
      
        <link rel="next" href="../5/">
      
      
        
      
      
      <link rel="icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.7.0">
    
    
      
        <title>4. (Hard) Median of Two Sorted Arrays - LeetCode Python</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.618322db.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.ab4e12ef.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="light" data-md-color-primary="blue" data-md-color-accent="light-blue">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#4-median-of-two-sorted-arrays" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="LeetCode Python" class="md-header__button md-logo" aria-label="LeetCode Python" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            LeetCode Python
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              4. (Hard) Median of Two Sorted Arrays
            
          </span>
        </div>
      </div>
    </div>
    
      
    
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
    
  
  
    
    
      <li class="md-tabs__item md-tabs__item--active">
        <a href=".." class="md-tabs__link">
          
  
  
  Python

        </a>
      </li>
    
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="LeetCode Python" class="md-nav__button md-logo" aria-label="LeetCode Python" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    LeetCode Python
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
    
  
  
  
    
    
    
    
      
        
        
      
      
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--section md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_1" checked>
        
          
          <label class="md-nav__link" for="__nav_1" id="__nav_1_label" tabindex="">
            
  
  
  <span class="md-ellipsis">
    
  
    Python
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_1_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_1">
            <span class="md-nav__icon md-icon"></span>
            
  
    Python
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    About
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../1/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    1. (Easy) Two Sum
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../2/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    2. (Medium) Add Two Numbers
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../3/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    3. (Medium) Longest Substring Without Repeating Characters
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    
  
    4. (Hard) Median of Two Sorted Arrays
  

    
  </span>
  
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    
  
    4. (Hard) Median of Two Sorted Arrays
  

    
  </span>
  
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#4-median-of-two-sorted-arrays" class="md-nav__link">
    <span class="md-ellipsis">
      
        4. Median of Two Sorted Arrays
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="4. Median of Two Sorted Arrays">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#problem-statement-and-efficiency-constraint" class="md-nav__link">
    <span class="md-ellipsis">
      
        Problem Statement and Efficiency Constraint
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#the-partitioning-principle" class="md-nav__link">
    <span class="md-ellipsis">
      
        The Partitioning Principle
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#applying-binary-search" class="md-nav__link">
    <span class="md-ellipsis">
      
        Applying Binary Search
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#verification-and-adjustment" class="md-nav__link">
    <span class="md-ellipsis">
      
        Verification and Adjustment
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#determining-the-median" class="md-nav__link">
    <span class="md-ellipsis">
      
        Determining the Median
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../5/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    5. (Medium) Longest Palindromic Substring
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../6/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    6. (Medium) Zigzag Conversion
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../7/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    7. (Medium) Reverse Integer
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../8/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    8. (Medium) String to Integer (atoi)
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../9/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    9. (Easy) Palindrome Number
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../10/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    10. (Hard) Regular Expression Matching
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../11/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    11. (Medium) Container With Most Water
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../12/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    12. (Medium) Integer to Roman
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../13/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    13. (Easy) Roman to Integer
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../14/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    14. (Easy) Longest Common Prefix
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../15/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    15. (Medium) 3Sum
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../16/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    16. (Medium) 3Sum Closest
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../17/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    17. (Medium) Letter Combinations of a Phone Number
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../18/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    18. (Medium) 4Sum
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../19/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    19. (Medium) Remove Nth Node From End of List
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../20/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    20. (Easy) Valid Parentheses
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../21/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    21. (Easy) Merge Two Sorted Lists
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../22/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    22. (Medium) Generate Parentheses
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../23/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    23. (Hard) Merge k Sorted Lists
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../24/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    24. (Medium) Swap Nodes in Pairs
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../25/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    25. (Hard) Reverse Nodes in k-Group
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../26/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    26. (Easy) Remove Duplicates from Sorted Array
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../27/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    27. (Easy) Remove Element
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../28/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    28. (Easy) Find the Index of the First Occurrence in a String (Implement strStr())
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../29/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    29. (Medium) Divide Two Integers
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../30/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    30. (Hard) Substring with Concatenation of All Words
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../31/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    31. (Medium) Next Permutation
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../32/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    32. (Hard) Longest Valid Parentheses
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../33/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    33. (Medium) Search in Rotated Sorted Array
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../34/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    34. (Medium) Find First and Last Position of Element in Sorted Array
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../35/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    35. (Easy) Search Insert Position
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../36/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    36. (Medium) Valid Sudoku
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../37/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    37. (Hard) Sudoku Solver
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../38/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    38. (Medium) Count and Say
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../39/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    39. (Medium) Combination Sum
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../40/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    40. (Medium) Combination Sum II
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#4-median-of-two-sorted-arrays" class="md-nav__link">
    <span class="md-ellipsis">
      
        4. Median of Two Sorted Arrays
      
    </span>
  </a>
  
    <nav class="md-nav" aria-label="4. Median of Two Sorted Arrays">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#problem-statement-and-efficiency-constraint" class="md-nav__link">
    <span class="md-ellipsis">
      
        Problem Statement and Efficiency Constraint
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#the-partitioning-principle" class="md-nav__link">
    <span class="md-ellipsis">
      
        The Partitioning Principle
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#applying-binary-search" class="md-nav__link">
    <span class="md-ellipsis">
      
        Applying Binary Search
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#verification-and-adjustment" class="md-nav__link">
    <span class="md-ellipsis">
      
        Verification and Adjustment
      
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#determining-the-median" class="md-nav__link">
    <span class="md-ellipsis">
      
        Determining the Median
      
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              
              <article class="md-content__inner md-typeset">
                
                  



  <h1>4. (Hard) Median of Two Sorted Arrays</h1>

<div class="highlight"><pre><span></span><code><span class="k">class</span><span class="w"> </span><span class="nc">Solution</span><span class="p">:</span>
    <span class="k">def</span><span class="w"> </span><span class="nf">findMedianSortedArrays</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">nums1</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">int</span><span class="p">],</span> <span class="n">nums2</span><span class="p">:</span> <span class="nb">list</span><span class="p">[</span><span class="nb">int</span><span class="p">])</span> <span class="o">-&gt;</span> <span class="nb">float</span><span class="p">:</span>
        <span class="n">A</span><span class="p">,</span> <span class="n">B</span> <span class="o">=</span> <span class="n">nums1</span><span class="p">,</span> <span class="n">nums2</span>
        <span class="n">m</span><span class="p">,</span> <span class="n">n</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">A</span><span class="p">),</span> <span class="nb">len</span><span class="p">(</span><span class="n">B</span><span class="p">)</span>

        <span class="k">if</span> <span class="n">m</span> <span class="o">&gt;</span> <span class="n">n</span><span class="p">:</span>
            <span class="n">A</span><span class="p">,</span> <span class="n">B</span> <span class="o">=</span> <span class="n">B</span><span class="p">,</span> <span class="n">A</span>
            <span class="n">m</span><span class="p">,</span> <span class="n">n</span> <span class="o">=</span> <span class="n">n</span><span class="p">,</span> <span class="n">m</span>

        <span class="n">half_len</span> <span class="o">=</span> <span class="p">(</span><span class="n">m</span> <span class="o">+</span> <span class="n">n</span> <span class="o">+</span> <span class="mi">1</span><span class="p">)</span> <span class="o">//</span> <span class="mi">2</span>

        <span class="n">low</span> <span class="o">=</span> <span class="mi">0</span>
        <span class="n">high</span> <span class="o">=</span> <span class="n">m</span>

        <span class="k">while</span> <span class="n">low</span> <span class="o">&lt;=</span> <span class="n">high</span><span class="p">:</span>
            <span class="n">partitionA</span> <span class="o">=</span> <span class="p">(</span><span class="n">low</span> <span class="o">+</span> <span class="n">high</span><span class="p">)</span> <span class="o">//</span> <span class="mi">2</span>
            <span class="n">partitionB</span> <span class="o">=</span> <span class="n">half_len</span> <span class="o">-</span> <span class="n">partitionA</span>

            <span class="n">maxLeftA</span> <span class="o">=</span> <span class="n">A</span><span class="p">[</span><span class="n">partitionA</span> <span class="o">-</span> <span class="mi">1</span><span class="p">]</span> <span class="k">if</span> <span class="n">partitionA</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="k">else</span> <span class="nb">float</span><span class="p">(</span><span class="s1">&#39;-inf&#39;</span><span class="p">)</span>
            <span class="n">minRightA</span> <span class="o">=</span> <span class="n">A</span><span class="p">[</span><span class="n">partitionA</span><span class="p">]</span> <span class="k">if</span> <span class="n">partitionA</span> <span class="o">&lt;</span> <span class="n">m</span> <span class="k">else</span> <span class="nb">float</span><span class="p">(</span><span class="s1">&#39;inf&#39;</span><span class="p">)</span>

            <span class="n">maxLeftB</span> <span class="o">=</span> <span class="n">B</span><span class="p">[</span><span class="n">partitionB</span> <span class="o">-</span> <span class="mi">1</span><span class="p">]</span> <span class="k">if</span> <span class="n">partitionB</span> <span class="o">&gt;</span> <span class="mi">0</span> <span class="k">else</span> <span class="nb">float</span><span class="p">(</span><span class="s1">&#39;-inf&#39;</span><span class="p">)</span>
            <span class="n">minRightB</span> <span class="o">=</span> <span class="n">B</span><span class="p">[</span><span class="n">partitionB</span><span class="p">]</span> <span class="k">if</span> <span class="n">partitionB</span> <span class="o">&lt;</span> <span class="n">n</span> <span class="k">else</span> <span class="nb">float</span><span class="p">(</span><span class="s1">&#39;inf&#39;</span><span class="p">)</span>

            <span class="k">if</span> <span class="n">maxLeftA</span> <span class="o">&lt;=</span> <span class="n">minRightB</span> <span class="ow">and</span> <span class="n">maxLeftB</span> <span class="o">&lt;=</span> <span class="n">minRightA</span><span class="p">:</span>
                <span class="k">if</span> <span class="p">(</span><span class="n">m</span> <span class="o">+</span> <span class="n">n</span><span class="p">)</span> <span class="o">%</span> <span class="mi">2</span> <span class="o">==</span> <span class="mi">1</span><span class="p">:</span>
                    <span class="k">return</span> <span class="nb">max</span><span class="p">(</span><span class="n">maxLeftA</span><span class="p">,</span> <span class="n">maxLeftB</span><span class="p">)</span>
                <span class="k">else</span><span class="p">:</span>
                    <span class="k">return</span> <span class="p">(</span><span class="nb">max</span><span class="p">(</span><span class="n">maxLeftA</span><span class="p">,</span> <span class="n">maxLeftB</span><span class="p">)</span> <span class="o">+</span> <span class="nb">min</span><span class="p">(</span><span class="n">minRightA</span><span class="p">,</span> <span class="n">minRightB</span><span class="p">))</span> <span class="o">/</span> <span class="mi">2</span>

            <span class="k">elif</span> <span class="n">maxLeftA</span> <span class="o">&gt;</span> <span class="n">minRightB</span><span class="p">:</span>
                <span class="n">high</span> <span class="o">=</span> <span class="n">partitionA</span> <span class="o">-</span> <span class="mi">1</span>

            <span class="k">else</span><span class="p">:</span>
                <span class="n">low</span> <span class="o">=</span> <span class="n">partitionA</span> <span class="o">+</span> <span class="mi">1</span>

        <span class="k">return</span> <span class="mf">0.0</span>
</code></pre></div>
<h2 id="4-median-of-two-sorted-arrays">4. Median of Two Sorted Arrays<a class="headerlink" href="#4-median-of-two-sorted-arrays" title="Permanent link">&para;</a></h2>
<h3 id="problem-statement-and-efficiency-constraint">Problem Statement and Efficiency Constraint<a class="headerlink" href="#problem-statement-and-efficiency-constraint" title="Permanent link">&para;</a></h3>
<p>LeetCode problem 4, "Median of Two Sorted Arrays," presents a significant challenge: given two already sorted arrays, <span class="arithmatex">\(nums1\)</span> of size <span class="arithmatex">\(m\)</span> and <span class="arithmatex">\(nums2\)</span> of size <span class="arithmatex">\(n\)</span>, find the median of the single sorted array that would result from merging both inputs. Crucially, the problem imposes a stringent constraint on the required time complexity, demanding an <span class="arithmatex">\(O(\log(m+n))\)</span> solution. This logarithmic complexity immediately rules out simple merging of the arrays (<span class="arithmatex">\(O(m+n)\)</span>) or any <span class="arithmatex">\(O(n^2)\)</span> approaches, strongly suggesting the use of a <strong>Binary Search</strong> technique.</p>
<p>The median is defined as the middle element of a sorted list. If the total number of elements <span class="arithmatex">\((m+n)\)</span> is odd, the median is the single middle element. If the total number of elements is even, the median is the average of the two middle elements. The core difficulty lies in finding this median without explicitly merging the entire arrays.</p>
<h3 id="the-partitioning-principle">The Partitioning Principle<a class="headerlink" href="#the-partitioning-principle" title="Permanent link">&para;</a></h3>
<p>The solution hinges on the concept of <strong>partitioning</strong> the two arrays. The goal is to find a "cut" in <span class="arithmatex">\(nums1\)</span> and a corresponding "cut" in <span class="arithmatex">\(nums2\)</span> such that two conditions are simultaneously met:</p>
<ol>
<li><strong>Equal-Sized Halves:</strong> The total number of elements in the left partitions (combined) must equal the total number of elements in the right partitions (combined). If the total length <span class="arithmatex">\((m+n)\)</span> is odd, the left side can have one more element than the right. We aim for <span class="arithmatex">\(\text{length}(\text{Left}) = \lfloor(m+n+1)/2\rfloor\)</span>.</li>
<li><strong>Order Preservation:</strong> Every element in the combined left partition must be less than or equal to every element in the combined right partition. That is, <span class="arithmatex">\(\text{max}(\text{Left}) \le \text{min}(\text{Right})\)</span>.</li>
</ol>
<h3 id="applying-binary-search">Applying Binary Search<a class="headerlink" href="#applying-binary-search" title="Permanent link">&para;</a></h3>
<p>To efficiently find these ideal cuts, we apply binary search on the smaller of the two arrays (let's assume <span class="arithmatex">\(nums1\)</span> is the smaller one, ensuring the search space is minimized, <span class="arithmatex">\(O(\log(\min(m, n)))\)</span>). We search for the optimal partition index, <span class="arithmatex">\(i\)</span>, in <span class="arithmatex">\(nums1\)</span>.</p>
<p>The partition index <span class="arithmatex">\(i\)</span> divides <span class="arithmatex">\(nums1\)</span> into a left part of size <span class="arithmatex">\(i\)</span> and a right part of size <span class="arithmatex">\(m-i\)</span>. The corresponding partition index <span class="arithmatex">\(j\)</span> in <span class="arithmatex">\(nums2\)</span> is automatically determined by the total required size of the left half: <span class="arithmatex">\(j = \lfloor(m+n+1)/2\rfloor - i\)</span>.  This fixed relationship ensures the first condition (equal sizes) is always satisfied.</p>
<h3 id="verification-and-adjustment">Verification and Adjustment<a class="headerlink" href="#verification-and-adjustment" title="Permanent link">&para;</a></h3>
<p>With the cuts defined by <span class="arithmatex">\(i\)</span> and <span class="arithmatex">\(j\)</span>, we identify the four key boundary elements: <span class="arithmatex">\(\text{L1} = nums1[i-1]\)</span>, <span class="arithmatex">\(\text{R1} = nums1[i]\)</span>, <span class="arithmatex">\(\text{L2} = nums2[j-1]\)</span>, and <span class="arithmatex">\(\text{R2} = nums2[j]\)</span>. (Edge cases, where <span class="arithmatex">\(i=0, i=m, j=0,\)</span> or <span class="arithmatex">\(j=n\)</span>, must be handled by assigning <span class="arithmatex">\(L\)</span> boundary values of <span class="arithmatex">\(-\infty\)</span> and <span class="arithmatex">\(R\)</span> boundary values of <span class="arithmatex">\(+\infty\)</span>).</p>
<p>The second condition, order preservation, requires that the largest element on the left side is less than or equal to the smallest element on the right side: <span class="arithmatex">\(\max(\text{L1}, \text{L2}) \le \min(\text{R1}, \text{R2})\)</span>. This breaks down into two separate checks:
1.  <span class="arithmatex">\(\text{L1} \le \text{R2}\)</span>
2.  <span class="arithmatex">\(\text{L2} \le \text{R1}\)</span></p>
<h3 id="determining-the-median">Determining the Median<a class="headerlink" href="#determining-the-median" title="Permanent link">&para;</a></h3>
<p>The binary search loop continues by adjusting the search range for <span class="arithmatex">\(i\)</span>:
* If <span class="arithmatex">\(\text{L1} &gt; \text{R2}\)</span> (i.e., <span class="arithmatex">\(nums1\)</span>'s cut is too far to the right), we move the binary search right boundary for <span class="arithmatex">\(i\)</span> to <span class="arithmatex">\(i-1\)</span>.
* If <span class="arithmatex">\(\text{L2} &gt; \text{R1}\)</span> (i.e., <span class="arithmatex">\(nums1\)</span>'s cut is too far to the left), we move the binary search left boundary for <span class="arithmatex">\(i\)</span> to <span class="arithmatex">\(i+1\)</span>.</p>
<p>Once the optimal partition is found (when both <span class="arithmatex">\(\text{L1} \le \text{R2}\)</span> and <span class="arithmatex">\(\text{L2} \le \text{R1}\)</span> hold), the median can be calculated:
* <strong>If <span class="arithmatex">\((m+n)\)</span> is odd:</strong> The median is the largest element in the left half, <span class="arithmatex">\(\text{Median} = \max(\text{L1}, \text{L2})\)</span>.
* <strong>If <span class="arithmatex">\((m+n)\)</span> is even:</strong> The median is the average of the largest element in the left half and the smallest element in the right half, <span class="arithmatex">\(\text{Median} = (\max(\text{L1}, \text{L2}) + \min(\text{R1}, \text{R2})) / 2\)</span>. This logarithmic approach successfully meets the strict <span class="arithmatex">\(O(\log(m+n))\)</span> time complexity requirement.</p>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      
      <script id="__config" type="application/json">{"annotate": null, "base": "..", "features": ["navigation.tabs", "search.suggest", "search.highlight", "content.code.copy"], "search": "../assets/javascripts/workers/search.7a47a382.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../assets/javascripts/bundle.e71a0d61.min.js"></script>
      
        <script src="../mathjax.js"></script>
      
        <script src="https://polyfill.io/v3/polyfill.min.js?features=es6"></script>
      
        <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js"></script>
      
    
  </body>
</html>